PROCEDURE TO ENABLE TOUCH ON UNICPU

1. Acquire and add the "egalax_i2c.c" file to following directory /home/hdd500Gb/linux-imx/drivers/input/touchscreen

2. Add the following lines to the "Kconfig" file in the following directory /home/hdd500Gb/linux-imx/drivers/input/touchscreen 

# Added Egalax i2c driver
config TOUCHSCREEN_EGALAX_I2C
	tristate "EETI eGalax i2c multi-touch panel support"
	depends on I2C && OF
	help
	  Say Y here to enable support for I2C connected EETI
	  eGalax multi-touch panels.

	  To compile this driver as a module, choose M here: the
	  module will be called egalax_i2c.	  
	  
3. Add the following line to the "Makefile" file in the following directory /home/hdd500Gb/linux-imx/drivers/input/touchscreen 

#Added Egalax i2c Driver
obj-$(CONFIG_TOUCHSCREEN_EGALAX_I2C)+= egalax_i2c.o

4. Open the terminal in the directory /home/hdd500Gb/linux-imx and enter the following commands to add the driver

$ source /users/stage3/mywork/tools/meta-toolchain/environment-setup-cortexa9hf-neon-poky-linux-gnueabi
$ make menuconfig
Device Drivers → Input device support → Touchscreens → EETI eGalax i2c multi-touch panel support (Press 'M') and save the settings
$ make uImage LOADADDR=0x10008000
$ make modules
$ make modules_install INSTALL_MOD_PATH=/users/stage3/mywork/Installed_modules

5. Add the following lines to /home/hdd500Gb/linux-imx/arch/arm/boot/dts/imx6qdl-unicpu-faverges.dtsi

&i2c1 {
	clock-frequency = <400000>;
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_i2c1>;
	status = "okay";
	
	egalax_i2c@2a {
        compatible = "eeti,egalax_i2c";
        reg = <0x2a>;
		interrupt-parent = <&gpio6>;
        interrupts = <8 8>;
        int-gpios = <&gpio6 8 0>;
    };
};    

6. Build the dtb file by following commands in the directory /home/hdd500Gb/linux-imx

$ source /home/hdd500Gb/tools/environment-setup-cortexa9hf-neon-poky-linux-gnueabi

NOTE: Please make sure that device-tree-complier package is installed in your linux machine before running the below commands.

$ make imx6dl-unicpu-fav1024768.dtb

7. Copy the installed modules to sdcard by following command

$ sudo cp -R /users/stage3/mywork/Installed_modules/lib/modules/4.9.11-03209-gc27010d-dirty/ /media/stage3/<this name of this directory changes each time you flash the sdcard>/lib/modules

8. Add the newly generated dtb and uImage files to bootloader partition

9. insert the sdcard card into unicpu and enter the following command in the directory /lib/modules/4.9.11-03209-gc27010d-dirty/kernel/drivers/input/touchscreen

$ insmod egalax_i2c.ko
$ shutdown -r now


